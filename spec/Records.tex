\sekshun{Records}
\label{Records}

A record is a data structure that is like a class but that has value
semantics.  The key differences between records and classes are
described in this section.

\subsection{Record Declarations}
\label{Record_Declarations}

A record is defined with the following syntax:
\begin{syntax}
record-declaration-statement:
  `record' identifier inherit-type-list[OPT] {
    record-statement-list }

record-inherit-expression-list:
  record-type
  record-type , inherit-expression-list

record-statement-list:
  record-statement
  record-statement record-statement-list

record-statement:
  type-declaration-statement
  function-declaration-statement
  variable-declaration-statement
\end{syntax}
The only difference between record and class declarations is that
the \chpl{record} keyword replaces the \chpl{class} keyword.

\subsection{Class and Record Differences}
\label{Class_and_Record_Differences}

The main differences between records and classes are that records are
value classes, do not need to be reclaimed since the data is recovered
when the variable goes out of scope, do not support dynamic dispatch,
and are assigned by value.

\subsubsection{Records as Value Classes}
\label{Records_as_Value_Classes}

A record is not a reference to a storage location that contains the
data in the record but is more like a variable of a primitive type.  A
record directly contains the data associated with the fields in the
record.

\subsubsection{Record Inheritance}
\label{Record_Inheritance}

When a record is derived from a base record, it contains the data in
the base record.  The difference between record inheritance and class
inheritance is that there is no dynamic dispatch.  The record type of
a variable is the exact type of that variable.

\subsubsection{Record Assignment}
\label{Record_Assignment}

In record assignment, the fields of the record on the left-hand side
of the assignment are assigned the values in the fields of the record
on the righ-hand side of the assignment.  When a base record is
assigned a derived record, just the fields that exist in the base
record are assigned.

\subsection{Default Comparison Operators on Records}

Default functions to overload \chpl{==} and \chpl{!=} are defined for
records if there is none defined for the record in the Chapel program.
The default implementation of \chpl{==} applies \chpl{==} to each
field of the two argument records and reduces the result with
the \chpl{&&} operator.  The default implementation of \chpl{!=}
applies \chpl{!=} to each field of the two argument records and
reduces the result with the \chpl{||} operator.
