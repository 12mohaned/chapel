#!/usr/bin/perl

$preset_platform=$ENV{'CHPL_PLATFORM'};
$preset_cross_platform=$ENV{'CHPL_CROSS_PLATFORM'};

if ($preset_platform eq "") {
    $platform = `uname -s`;
    chomp($platform);
    $platform = lc($platform);
    $underscore = index($platform, "_");
    if ($underscore != -1) {
        substr($platform, $underscore) = "";
    }
    if ($platform eq "linux") {
        $machine = `uname -m`;
        chomp($machine);
        if ($machine eq "x86_64") {
            $build64_32 = $ENV{'CHPL_BUILD_X86_64_AS_32'};
            if ($build64_32 eq "1") {
                $platform = "linux64_32";
            } else {
                $platform = "linux64";
            }
        }
    }
} else {
    $platform = $preset_platform;
}


print "$platform\n";
exit(0);


