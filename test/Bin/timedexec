#!/usr/bin/perl

#
# @ARGV[0] = "-S"
# @ARGV[1] = <timeout value>
# @ARGV[2...] = command to run
#

$| = 1;					# will flush buffers after write

eval {
    local $SIG{ALRM} = sub { die "alarm\n" };
    alarm @ARGV[0];
    system @ARGV[1..$#ARGV];
    $mystatus = $?;
    alarm 0;
};
die if $@ && $@ ne "alarm\n";
if ($@) {
    print "timedexec Alarm Clock\n";
    exit(222);
} else {
    exit($mystatus);
}
