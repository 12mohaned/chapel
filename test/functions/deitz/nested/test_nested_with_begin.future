bug: failure to put local accessed in begin via nested function on heap
