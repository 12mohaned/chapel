# USAGE:
#
# Current notes on triage results, sorted by type of failure
# (benchmark, compiler, or platform).
#


Suggested TODO for Sung's week:

1) Once bswap.h gets fixed, see if you can characterize where we are
   with PGI testing.  There's been a lot of noise in the past week and
   it's hard to tell what the real issues are.  For that matter, it
   might be worth diffing all the prgenv, pgi, intel .logs against
   testing a week or so ago when this clears up to see whether anything
   got lost in the noise.

2) Look into nondeterministic SIGABRT issue with gasnet-fast on
   test/release/examples/ra*.chpl which seem new to me.

3) I think you're already on the SSCA2_commDiags question


=========================================================
Problems analyzed and assigned that should be fixed soon:
=========================================================

darwin/mac runtime build (2012-10-13) (hilde)
chpl compiles on prgenv-*, pgi (2012-10-13) (hilde)
---------------------------------------------------
broken due to bswap.h changes

studies/ssca2/performance/SSCA2_commDiags (sungeun)
---------------------------------------------------
  linux64.gnu.gasnet-everything.fifo.pthreads-std (2012-10-02)
  Sung has this one.  It looks to me (gbt) like the comm diags ranges just
  need to be wider.


==============================================
These things regularly cause noise in testing:
==============================================

SIGABRT on gasnet-fast runs (UNASSIGNED)
----------------------------------------
release/examples/benchmarks/hpcc/ra (compopts: 1) (10/13/12)
mutilocale/deitz/needMultiLocales/diagnostics/test_private_broadcast_large (10/11/12)
ra-atomics (UNASSIGNED) (10/11/12)

SSCA2_main (UNASSIGNED)
-----------------------
Times out in compilation for PGI with regularity (seen throughout week
of 10/8/12)

ra* (gbt)
---------
Greg improved the verification loops using syncs to avoid losing data,
but occasional failures continued.

New information (10/3/12): the "random" indices are strongly skewed toward
the bottom of the index range (1/4th of the table updates are to the 0'th
element), which makes conflicting updates far more common than they should
be.  Sung reports that the official HPCC RA changed its random number
generator for this reason -- we should look into converting Chapel to use
the same algorithm (or to permit a selection between both).
  release/examples/benchmarks/hpcc/variants/ra-cleanloop: fixed by r20326
  studies/hpcc/2008/ra: not fixed yet, failed 8/14/12
  studies/hpcc/nodistrib/ra.nodist: should have been fixed by 20333 (8/14/12),
    not fixed yet, failed 8/18/12, 9/{16,17,21,30}/12.
  studies/hpcc/RA/bradc/parallel/ra-dist: not fixed yet, last failure unknown

lulesh (bradc)
--------------
Times out sometimes in XMT testing, but seems to have stabilized in
other cases.

TooManyThreads (unassigned)
---------------------------
Fails periodically.  Lately observed pthreads.tcmalloc (2012/08/15).

mutilocale/deitz/needMultiLocales/diagnostics/test_private_broadcast_large
--------------------------------------------------------------------------
  Succeeded: 9/23 (64ggffpd)
  Failed: 10/4 (linux64.gnu.gasnet-fast.fifo.pthreads.dlmalloc)
  Failed (SIGABRT): 10/11/12 (")

linux64.gnu.gasnet.qthreads.none (UNASSIGNED)
---------------------------------------------
0) We moved to a non-oversubscribed setting on a beefier machine
1) Continue to have a lot of noise in testing.
   - Often the execution times out nondeterministically
     - Arguably some of these cases are due to bad assumptions about task
       scheduling within a test (syncCounter is an example of this -- should
       be rewritten; ask Brad for more info if wanting to take this on)
2) Got a seg fault (06/06/12, 6/16, stream-ep 8/23/12)
3) Intermitent seg fault on exit (7/7 7/9, 7/12, 7/13, same as #2?)
4) seg fault during program execution (same as #2?):
   distributions/robust/arithmetic/optimizations/optimizeOnClauses_basic_tuple (7/10)
   release/examples/spec/Classes/delete (7/12)

baseline (UNASSIGNED)
---------------------
distributions/nelson/MultiBlockDist2DLocales

studies/shootout/mandelbrot/mandelbrot-fancy (10/12/12)
-------------------------------------------------------
gets incorrect answer using --baseline; sometimes times out

valgrind (sungeun)
------------------
*** It's a little difficult to follow the trend since we only run this
*** once a week, so only the last log file is preserved.  We should
*** considering saving the logs week-over-week (which we should
*** probably do for all the tests too since we have the space to).
1) Nondeterministic "the impossible has happened" failures
   2012/08/13 -- Only one test case failed: MultiBlockDist2DLocales

   8/30/12: Passed --numThreadsPerLocale=100 to all tests to try and
   avoid VG_N_THREADS error that is causing all the impossible errors.

2) Nondeterministic timeouts (could raise timeout value even further)
   8/30/12: Timed out when running start_test by hand (versus in
   parallel as the nightly does), so I don't think it's worth
   disabling parallel testing for the sake of the time outs.

xmt build (UNASSIGNED)
----------------------
Every night, first XMT compile fails; second one succeeds.  Is there
any chance that this is due to a leftover program library of some
sort?  If not, file bug against XMT compiler.

compflags/ferguson/sub_test
---------------------------
chpbld02 has /tmp mounted on /ptmp.  The path search in findProgramPath appears
to be finding chpl in /ptmp instead of /tmp even though the /ptmp directory
it is finding is not in path. The /ptmp path it is finding is actually the
same directory as the /tmp directory it is looking for.


=========================================
Not so noisy as to be familiar annoyances
=========================================

errors running sub_test (UNASSIGNED)
------------------------------------
seen on chpbld01 for linux64.intel.none.fifo.pthreads on 10/10/12

parallel/cobegin/diten/cobeginRace (UNASSIGNED)
----------------------------------------------------
"timedexec died with signal 11" - pgi compiler (06/18/12)
unknown cause - baseline (06/17/12)

non-deterministic timeouts with gasnet (UNASSIGNED)
---------------------------------------------------
The following configurations are affected:
 linux64.gnu.gasnet.qthreads.none
 linux64.gnu.gasnet.fifo.pthreads.tcmalloc
 linux64.gnu.gasnet-fast.fifo.pthreads.dlmalloc
 linux64.gnu.gasnet-everything.fifo.pthreads
examples of what times out:
 distributions/robust/arithmetic/kernels/jacobi (still timing out 10/4/12)
 distributions/nelson/MultiBlockDist2DLocales (maybe resolved?)
 distributions/robust/arithmetic/modules/test_module_Sort (maybe resolved?)
 distributions/robust/arithmetci/stress/test_many_domains (08/13)
 distributions/dm/t2 (2012/08/15)
 etc.

"in routine alloca() there is a stack overflow" under PGI (UNASSIGNED)
----------------------------------------------------------------------
Somewhat? nondeterministic.
These configurations:
 linux64.pgi.none.fifo.pthreads
 xt-cle.cray-xt-pgi.none.fifo.pthreads
 xt-cle.cray-xt-pgi.none.fifo.pthreads--linux64.gnu

minus_equals nondeterminism (UNASSIGNED)
----------------------------------------
noted in regressions (week of 07/02, still present 10/2, 10/9)

atomics nondeterminisms (UNASSIGNED)
------------------------------------
release/examples/primers/atomics (06/30/12:xt-intel, 07/04/12:linux32, 08/14/12:xt-cle)

gasnet-everything nondeterminisms (UNASSIGNED)
----------------------------------------------
MultiBlockDist2DLocales (06/05/12, 6/16)
test_module_Sort (06/06/12, 6/16)
test_array_slicing3 (06/08/12, 6/16)

no-local nondeterminisms (UNASSIGNED)
-------------------------------------
cg-sparse-timecomp (06/05/12)
studies/ssca2/atomic/SSCA2_main_atomic (07/04/12)

tcmalloc failures (08/08/12)
----------------------------
[Error: Timed out executing program distributions/robust/arithmetic/kernels/hpl (compopts: 1)]
[Error: Timed out executing program distributions/robust/arithmetic/kernels/jacobi]
[Error: Timed out executing program distributions/robust/arithmetic/modules/test_module_Sort]

nondet. tmalloc failures
------------------------
[Error: Timed out executing program distributions/robust/arithmetic/stress/test_many_domains] (08/08/12)

parallel/begin/deitz/test_big_recursive_begin future succeeded
--------------------------------------------------------------
*-linux64.gnu.none.fifo.pthreads (10/10/12)
*-linux64.gnu.none.fifo.pthreads-std.log (8/18,9/2,9/9,9/13/12)
*-linux64.gnu.none.fifo.pthreads-npt.log (baseline)
  (9/{4,5,14,22,30}/12)
  (10/2/12)
120821/Nightly-day2-Tue-linux64.gnu.none.fifo.pthreads-nlc.log

===========================================
Not noisy, but need some attention sometime
===========================================

types/range/hilde/align64
-------------------------
This test gets a false positive pass on intel and pgi it seems, for
reasons that are not clear to me (i.e., why are they behaving differently
than gcc?).  If the future should remain, a .skipif should be added to
skip it in these cases.
 
I wouldn't call the future a bug so much as a 'feature request' or
'semantic' future -- it suggests a change in the language definition
that should be considered and agreed upon rather than reflecting a way
in which the compiler is incorrect w.r.t. the language definition (as
I understand it.

xt-cle.cray-xt-cray.none.fifo.pthreads
--------------------------------------
The following compiler segfaults(?) appeared only once on 9/28/12
[Error matching compiler output for release/examples/primers/opaque]
[Error matching compiler output for release/examples/spec/Generics/fillTuple2]
[Error matching compiler output for release/examples/spec/Iterators/as-arrays]
[Error matching compiler output for release/examples/spec/Ranges/alignedNegStride]
