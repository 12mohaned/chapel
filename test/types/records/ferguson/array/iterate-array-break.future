bug: inlined iterator leaks memory if caller breaks out of loop
